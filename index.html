<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Canvas text clip outline</title>
    </head>
    <body>
        <canvas width="320" height="240" id="canvas"></canvas>
        
        <script type="text/javascript">
            var ctx = canvas.getContext('2d');
            var text = 'Canvas text clip outline';
            var measureText = ctx.measureText(text);
            var fontSize = parseInt(ctx.font.match(/\d+/), 10);
            var padding = 8;
            var w = measureText.width + padding * 2;
            var h = fontSize + padding * 2;
            var x = canvas.width / 4 - w / 2;
            var y = canvas.height / 4 - h / 2;

            // Background
            ctx.beginPath();
            ctx.fillStyle = '#ccc';
            ctx.beginPath();
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Text outine
            /* ctx.beginPath();
            ctx.fillStyle = 'pink';
            ctx.fillRect(x, y, w, h); */

            // Clip
            ctx.save();
            ctx.beginPath();
            /* ctx.fillStyle = 'red';
            ctx.fillRect(0, 0, canvas.width, y);

            ctx.fillStyle = 'blue';
            ctx.fillRect(0, y, x, h);

            ctx.fillStyle = 'green';
            ctx.fillRect(x + w, y, canvas.width - x - w, h);

            ctx.fillStyle = 'yellow';
            ctx.fillRect(0, y + h, canvas.width, canvas.height - y + h); */
            ctx.rect(0, 0, canvas.width, y);
            ctx.rect(0, y, x, h);
            ctx.rect(x + w, y, canvas.width - x - w, h);
            ctx.rect(0, y + h, canvas.width, canvas.height - y + h);
            ctx.clip();

            // Line
            ctx.beginPath();
            ctx.moveTo(0, 0);
            ctx.strokeStyle = '#000';
            ctx.lineTo(canvas.width / 2, canvas.height / 2);
            ctx.stroke();
            ctx.restore();
            
            // Text
            ctx.beginPath();
            ctx.fillStyle = '#000';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(text, canvas.width / 4, canvas.height / 4);

            console.log(ctx);
        </script>
    </body>
</html>